// Generated by CoffeeScript 1.8.0
(function() {
  var load_page;

  window.onload = function() {
    if ($('.page-select').length) {
      $('.page-select:first').addClass('curr_page');
      return load_page();
    }
  };

  $(function() {
    return $('.page-select').click(function() {
      $('.page-select').removeClass('curr_page');
      $('.content').children().remove();
      $(this).addClass('curr_page');
      return load_page();
    });
  });

  load_page = function() {
    var id;
    id = $('.curr_page').attr("id_page");
    return $.ajax({
      url: "/view_mode/" + 148 + '/',
      type: "POST",
      data: {
        'id_return_page': id,
        'csrfmiddlewaretoken': $("[name='csrfmiddlewaretoken']").val()
      },
      async: false,
      success: function(data) {
        $('.content').append(data.page);
        $.each($('.markdown-field'), function(index, val) {
          var text;
          text = val.innerHTML;
          text = markdown.toHTML(text);
          return $(val).replaceWith(text);
        });
        return $.each($('.glyphicon'), function(index, val) {
          return $.ajax({
            url: "/like/",
            type: "GET",
            data: {
              'id_rating_get_likes': $(val).parent().parent().attr('id_rating')
            },
            success: function(data) {
              return $(val).parent().children('text').text(data.response);
            }
          });
        });
      }
    });
  };

}).call(this);

//# sourceMappingURL=view_mode.js.map
