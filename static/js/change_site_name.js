// Generated by CoffeeScript 1.8.0
(function() {
  $(function() {
    var end_change_name, old_site_name, set_new_name;
    old_site_name = "";
    $('body').on('click', '#edit_site_name_button', function() {
      old_site_name = $('#name_not_edit_span').attr("name_project");
      $('#name_not_edit_span').remove();
      $('#change_site_name_block').append('<span id="name_edit_span"> <input id="input_site_name" type="text" maxlength="30" size=10 value=""> <button class="btn btn-xs" id="change_site_name_button">OK</button> </span>');
      return $('#input_site_name').val(old_site_name);
    });
    $('body').on('click', '#change_site_name_button', function() {
      return set_new_name();
    });
    set_new_name = function() {
      var id, new_site_name;
      new_site_name = $('#input_site_name').val();
      if (!new_site_name) {
        new_site_name = old_site_name;
      }
      id = $('h2').attr("id_project");
      return $.ajax({
        url: "/change_site_name/",
        type: "GET",
        data: {
          'proj_id': id,
          'new_site_name': new_site_name
        },
        success: function(data) {
          return end_change_name(data.newName.replace(/\</gi, '&lt;'));
        },
        error: function() {
          return alert('in change site name');
        }
      });
    };
    return end_change_name = function(site_name) {
      $('#name_edit_span').remove();
      $('#change_site_name_block').append('<span id="name_not_edit_span" name_project = ""> <button type="button" class="btn btn-link" id="edit_site_name_button"> edit</button> </span>');
      $('#name_not_edit_span').prepend(site_name);
      return $('#name_not_edit_span').attr('name_project', site_name);
    };
  });

}).call(this);

//# sourceMappingURL=change_site_name.js.map
